	<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/layout/templateKuPtll.xhtml">
	
	<ui:define name="body">
		<rich:panel>
			<f:facet name="header">
				<h:outputText
					value="#{ventaComboHome.managed?sainv_view_messages.get('combapa_head_edit'):sainv_view_messages.get('combapa_head_register')}" />
			</f:facet>
			<rich:spacer height="10" />
			<rich:tabPanel switchType="ajax" id="tabsCmbAparato">
				<rich:tab name="tab1" label="#{app.tab1_apaaud}"
					action="#{ventaComboHome.cambiarComboSel(1)}" eventsQueue="q1">
					<h:form id="formapacli">
						<p:growl globalOnly="true" sticky="false" life="3000" />
						<p:focus />
						<a:queue name="q1" ignoreDupResponses="false" />
						<fieldset>
							<legend>#{app.combapa_legend}</legend>
							<center>
								<table style="width: 950px;">
									<tr>
										<td style="width: 40%;"><h:panelGrid columns="2">
												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:250px;">
													<ui:define name="label">#{app.repcli_cliente}:</ui:define><!-- rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }" -->
													<h:inputText id="patSearch" styleClass="busProd"
														rendered="#{empty ventaComboHome.cotizacion}"
														style="width:200px;"> <a:support ajaxSingle="true" event="onblur"> </a:support></h:inputText>
													<p:watermark for="patSearch"
														value="#{app.sched_new_searchpat}" id="watermark" />
													<rich:suggestionbox immediate="true" ajaxSingle="true"
														eventsQueue="q1" ignoreDupResponses="true" height="310"
														autosized="true" id="suggestionBox" for="patSearch"
														suggestionAction="#{clienteHome.getPacientesByName}"
														width="1000" var="val" minChars="1"
														nothingLabel='#{app.compramast_buscar_nomatch}'>
														<h:column>
															<f:facet name="header">
																<h:outputText styleClass="headCoi bigHd"
																	value="#{app.patimast_firstname1}" />
															</f:facet>
															<h:outputText styleClass="bigCnt" value="#{val[0]}" />
														</h:column>
														<h:column>
															<f:facet name="header">
																<h:outputText styleClass="headCoi bigHd"
																	value="#{app.patimast_lastname1}" />
															</f:facet>
															<h:outputText styleClass="bigCnt" value="#{val[1]}" />
														</h:column>
														<h:column>
															<f:facet name="header">
																<h:outputText styleClass="headCoi bigHd"
																	value="#{app.patimast_telephone}" />
															</f:facet>
															<h:outputText styleClass="bigCnt" value="#{val[2]}" />
														</h:column>
														<h:column>
															<f:facet name="header">
																<h:outputText styleClass="headCoi bigHd"
																	value="#{app.patimast_email}" />
															</f:facet>
															<h:outputText styleClass="bigCnt" value="#{val[3]}">
															</h:outputText>
														</h:column>

														<a:support event="onselect" reRender="lblSelPat, lblSelPat1"
															eventsQueue="q1" ajaxSingle="true"
															action="#{ventaComboHome.instance.setCliente(val[4])}"
															focus="patSearch" />
															
													</rich:suggestionbox>
													<h:inputText id="lblSelPat"
														rendered="true"
														value="#{ventaComboHome.instance.cliente.nombres} #{ventaComboHome.instance.cliente.apellidos}"
														readonly="#{facesContext.renderResponse}" required="false" disabled="true"
														style="width:200px;"> <a:support ajaxSingle="true" eventsQueue="q1" event="onblur"></a:support> </h:inputText>
													<h:inputText id="lblSelPat1" 
														rendered="#{not empty ventaComboHome.cotizacion.cliente and empty ventaComboHome.instance.cliente.nombres}"
														value="#{ventaComboHome.cotizacion.cliente.nombreCompleto}"
														readonly="#{facesContext.renderResponse}" required="false" disabled="true"
														style="width:200px;"> <a:support ajaxSingle="true"  event="onblur"></a:support> </h:inputText>
													<a:commandButton
														rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }"
														onclick="#{rich:component('selClient')}.show();"
														ajaxSingle="true" reRender="cli" styleClass="modifyBtn"
														value="#{app.general_vertodos}" style="width:auto;">
													</a:commandButton>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:220px;">
													<ui:define name="label">#{app.combapa_combo}:</ui:define><!-- rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }" -->
													<a:commandButton
														onclick="#{rich:component('selCombo')}.show();"
														ajaxSingle="true"
														action="#{comboAparatoHome.cargarCombosActivos()}"
														rendered="#{empty ventaComboHome.cotizacion}"
														reRender="cmb" styleClass="modifyBtn"
														value="#{app.ca_button_selprod}" width="auto">
													</a:commandButton>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
													<ui:define name="label">#{app.vtaprs_verdet}:</ui:define>
													<h:inputTextarea value="#{ventaComboHome.instance.detalle}">
														<a:support event="onblur" ajaxSingle="true"
															eventsQueue="q1" />
													</h:inputTextarea>
												</s:decorate>
												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:170px;">
													<ui:define name="label">#{app.aparcli_validthrough}:</ui:define>
													<h:selectOneMenu
														noSelectionLabel="#{app.combapa_selval_nosel}"
														hideNoSelectionLabel="true"
														value="#{ventaComboHome.validez}" required="true"
														id="_validez">
														<f:selectItem itemLabel="#{app.combapa_gar_30d}"
															itemValue="30" />
														<f:selectItem itemLabel="#{app.combapa_gar_45d}"
															itemValue="45" />
														<f:selectItem itemLabel="#{app.combapa_gar_60d}"
															itemValue="60" />
													</h:selectOneMenu>
												</s:decorate>
												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
													<ui:define name="label">#{app.aparcli_earphone}:</ui:define>
													<h:selectBooleanCheckbox
														value="#{aparatoClienteHome.instance.retroAuricular}">
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1" />
													</h:selectBooleanCheckbox>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:170px;">
													<ui:define name="label">#{app.aparcli_earside}:</ui:define>
													<h:selectOneMenu
														value="#{aparatoClienteHome.instance.ladoAparato}"
														required="true" id="_selLadoNrml">
														<f:selectItem itemLabel="#{msn.side_left}" itemValue="IZQ" />
														<f:selectItem itemLabel="#{msn.side_right}" itemValue="DER" />
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1"
															action="#{ventaComboHome.actualizarLadoApa()}"
															reRender="_selLadoBin,_selLadoNrml" />
													</h:selectOneMenu>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
													<ui:define name="label">#{app.combapa_tiene_gar}:</ui:define>
													<h:selectBooleanCheckbox id="boolTieneGar"
														value="#{ventaComboHome.tieneGarantia}" disabled="true">
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1" reRender="_tmGar" />
													</h:selectBooleanCheckbox>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;" id="_tmGar">
													<ui:define name="label">#{app.combapa_time_gar}:</ui:define>
													<h:selectOneMenu
														value="#{ventaComboHome.comboVta.periodoGarantia}"
														style="width:160px;"
														rendered="#{not empty ventaComboHome.comboVta and ventaComboHome.tieneGarantia==true}">
														<f:selectItem itemLabel="#{app.combapa_gar_30d}"
															itemValue="30" />
														<f:selectItem itemLabel="#{app.combapa_gar_60d}"
															itemValue="60" />
														<f:selectItem itemLabel="#{app.combapa_gar_183d}"
															itemValue="183" />
														<f:selectItem itemLabel="#{app.combapa_gar_366d}"
															itemValue="366" />
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1" />
													</h:selectOneMenu>
												</s:decorate>

											</h:panelGrid></td>
									</tr>
									
									<tr> <td> <hr style="border:0.01em dashed #333; box-shadow: 0px 0px 10px #666;"></hr></td></tr>
									
									<tr>
										<td colspan="2"><br /> 
										<h3 class="cmbVta-lbl">
										<h:outputText rendered="#{not empty ventaComboHome.selCmbsList and ventaComboHome.cotizacion.estado=='PEN'}" value="combo venta:" style="margin-right:5px;" />
										
										
										<h:selectOneMenu
												value="#{ventaComboHome.selectedComboVta}"
												rendered="#{not empty ventaComboHome.selCmbsList and ventaComboHome.cotizacion.estado=='PEN'}">
												<s:selectItems value="#{ventaComboHome.selCmbsList}"
													var="combo" label="#{combo.nombre}" itemValue="#{combo.id}"
													noSelectionLabel="Seleccione combo..."
													hideNoSelectionLabel="true" />
												<a:support event="onchange" ajaxSingle="true"
													eventsQueue="q1"
													reRender="_clPrecio,_tblItemsCmb, _dgCombos, boolTieneGar, _tmGar, _totMag1"
													action="#{ventaComboHome.setComboVender()}" update="growl" />
											</h:selectOneMenu> </h3> 
											<rich:dataGrid value="#{ventaComboHome.selCmbsList}"
												var="combo" columns="1" elements="9" width="600px"
												border="0" id="_dgCombos">
												<!-- Panel de los combos cotizados que no se han vendido  -->
												<rich:panel id="_cmbDet"
													rendered="#{not (ventaComboHome.cotizacion.estado=='COT' or ventaComboHome.cotizacion.estado=='APL' and combo.id==ventaComboHome.cotizacion.selComboId)}">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText
																rendered="#{combo.total > 0 and (ventaComboHome.cotizacion.estado =='COT' or ventaComboHome.showTotal)}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable var="res" value="#{combo.itemsCombo}"
														id="_tblItemsCmb" rows="10" align="center"
														rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column width="150px">
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true and not (ventaComboHome.cotizacion.estado=='COT' or ventaComboHome.cotizacion.estado=='PEN')}"
															id="_clPrecio">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.producto.prcNormal}"
																rendered="#{res.tipoPrecio=='NRM'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcMinimo}"
																rendered="#{res.tipoPrecio=='MIN'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcOferta}"
																rendered="#{res.tipoPrecio=='OFE'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true and (ventaComboHome.cotizacion.estado=='COT' or ventaComboHome.cotizacion.estado=='PEN' )}"
															id="_clPrecioCotizado">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.precioCotizado}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true and (ventaComboHome.cotizacion.estado=='COT' or ventaComboHome.cotizacion.estado=='PEN' )}">
															<f:facet name="header">Tipo Precio Cotizado</f:facet>
															<h:outputText value="#{res.tipPreCotizado}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column width="30px">
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														<!--<rich:column width="30px">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column> -->
														
														<rich:column width="30px">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>

														<!-- <rich:column width="30px">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column> -->
														<rich:column width="30px">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="cod" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCode')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
												<rich:panel id="_cmbDet2"
													rendered="#{ventaComboHome.cotizacion.estado=='COT' and combo.id==ventaComboHome.cotizacion.selComboId}"
													headerClass="dr-pnl-h-custom">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText
																rendered="#{combo.total > 0 and (ventaComboHome.cotizacion.estado =='COT' or ventaComboHome.showTotal)}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable style="vertical-align:middle;" var="res"
														value="#{combo.itemsCombo}" id="_tblItemsCmb2" rows="10"
														align="center" rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column width="150px">
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}"
															id="_clPrecio2">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.precioCotizado}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column>
															<f:facet name="header">Tipo Precio Cotizado</f:facet>
															<h:outputText value="#{res.tipPreCotizado}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														
														<!-- <rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column> -->
														
														<rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>


														<rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														<!-- <rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column> -->
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="cod" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCode')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
												<rich:panel id="_cmbDet3"
													rendered="#{ventaComboHome.cotizacion.estado=='APL' and combo.id==ventaComboHome.cotizacion.selComboId}"
													headerClass="comboVendido">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText
																rendered="#{combo.total > 0 and (ventaComboHome.cotizacion.estado =='APL' or ventaComboHome.showTotal)}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable style="vertical-align:middle;" var="res"
														value="#{combo.itemsCombo}" id="_tblItemsCmb3" rows="10"
														align="center" rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column width="150px">
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}"
															id="_clPrecio2">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.precioCotizado}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column>
															<f:facet name="header">Tipo Precio Cotizado</f:facet>
															<h:outputText value="#{res.tipPreCotizado}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														
														<!-- <rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column> -->
														
														<rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>


														<rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo1.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														<!-- <rich:column style="width:auto;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column> -->
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="cod" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCode')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
											</rich:dataGrid> <s:decorate template="/layout/kEditSpace.xhtml"
												style="width:100px;" id="_totMag1"
												rendered="#{ventaComboHome.showTotal and ventaComboHome.totalMagnanime gt 0}">
												<h:outputText value="#{app.vtaapa_tot_vta}"
													style="font-weight:bold; font-size:16px;" />

												<h:outputText value="#{ventaComboHome.totalMagnanime}"
													style="font-weight:bold; font-size:16px;">
													<f:convertNumber currencySymbol="$" type="currency"
														locale="en-US" groupingUsed="true" integerOnly="true"
														maxFractionDigits="2" minFractionDigits="2" />
												</h:outputText>
											</s:decorate></td>
									</tr>
								</table>


								<s:decorate id="_actionBtns" template="/layout/kActions.xhtml">
									<a:commandButton action="#{ventaComboHome.calcularPrecios()}"
										reRender="formapacli, formapacli2, _totMag1"
										styleClass="saveBtn" value="#{app.vtaapa_calc_tot}" 
										rendered="#{not empty ventaComboHome.selCmbsList}"/>

									<a:commandButton action="#{ventaComboHome.porCobrar()}"
										reRender="formapacli,_actionBtns"
										rendered="#{not ventaComboHome.managed and not empty ventaComboHome.cotizacion and empty ventaComboHome.cotizacion.cuentaCobrar and ventaComboHome.cotizacion.estado!='APL'}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="Poner a credito" />
									<s:decorate
										rendered="#{not empty ventaComboHome.cotizacion.cuentaCobrar}"
										style="display:inline-block; margin:0px 10px 0px 0px; vertical-align:middle;">
										<h:graphicImage value="/kubeImg/disabled.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente gt (0.9 * ventaComboHome.cotizacion.cuentaCobrar.monto)}" />
										<h:graphicImage value="/kubeImg/alert.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente ge 0.01  and ventaComboHome.cotizacion.cuentaCobrar.remanente le (0.9 * ventaComboHome.cotizacion.cuentaCobrar.monto)}" />
										<h:graphicImage value="/kubeImg/enabled.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente lt 0.01}" />
										<s:decorate style="vertical-align:middle; font-weight:bold;">
											<h:outputText value="Remanente: " />
											<h:outputText
												value="#{ventaComboHome.cotizacion.cuentaCobrar.remanente}">
												<f:convertNumber currencySymbol="$" groupingUsed="true"
													integerOnly="true" type="currency" locale="en-US"
													maxFractionDigits="2" minFractionDigits="2" />
											</h:outputText>
										</s:decorate>
									</s:decorate>
									<a:commandButton action="#{ventaComboHome.save()}"
										reRender="formapacli"
										rendered="#{not ventaComboHome.managed and not empty ventaComboHome.cotizacion and ventaComboHome.cotizacion.estado!='COT' and ventaComboHome.cotizacion.estado!='APL'}"
										disabled="#{ventaComboHome.cotizacion.cuentaCobrar.remanente gt 0.01}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_venta}" />
										
									<a:commandButton action="#{ventaComboHome.finalizarVentaPorCredito()}"
										reRender="formapacli,formapacli2"
										rendered="#{not empty ventaComboHome.cotizacion and ventaComboHome.cotizacion.cuentaCobrar.remanente==0}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_venta}" />
									<!-- rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') and not (ventaComboHome.binaural)}" styleClass="binBtn"
									 -->
									<a:commandButton action="#{ventaComboHome.setApaBinaural()}"
										reRender="tabsCmbAparato"
										rendered="#{empty ventaComboHome.cotizacion and not (ventaComboHome.binaural)}" styleClass="binBtn"
										ignoreDupResponses="true" value="#{app.vt_vtaprs_setbinral}" />
									<a:commandButton action="#{ventaComboHome.quitApaBinaural()}"
										reRender="tabsCmbAparato"
										rendered="#{ventaComboHome.binaural and empty ventaComboHome.cotizacion.estado}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_qutbinral}" />

									<a:commandButton propagation="join"
										oncomplete="showReport('detalleCotiz', '#{conversation.id}'); "
										rendered="#{not empty ventaComboHome.cotizacion}"
										styleClass="pdfBtn" ignoreDupResponses="true"
										value="#{app.vt_rep_cotiz}" />

									<a:commandButton action="#{ventaComboHome.cotizarVenta()}"
										reRender="formapacli"
										rendered="#{not ventaComboHome.managed and empty ventaComboHome.cotizacion}"
										styleClass="saveBtn" ignoreDupResponses="false"
										value="#{app.vt_vtaprs_cotiz}" />

									<a:commandButton
										rendered="#{ventaComboHome.cotizacion.estado == 'PEN' and loginUser.getUser().isAccionEspecial()==true and not ventaComboHome.managed and not empty ventaComboHome.cotizacion}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="Autorizar descuento">
										<a:support event="onclick" ajaxSingle="true" eventsQueue="q1"
											reRender="formapacli"
											action="#{ventaComboHome.actualizarCotizacion()}"
											update="growl" />
									</a:commandButton>

									<a:commandButton
										action="#{ventaComboHome.cancelarCotizacion()}"
										reRender="formapacli" rendered="#{false}"
										styleClass="deleteBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_cotiz_can}" />

								</s:decorate>

							</center>
						</fieldset>
					</h:form>
				</rich:tab>
				<rich:tab name="tab2" label="#{app.tab2_apaaud}"
					disabled="#{not ventaComboHome.binaural}"
					action="#{ventaComboHome.cambiarComboSel(2)}" eventsQueue="q2">
					<h:form id="formapacli2" rendered="#{ventaComboHome.binaural}">
						<p:growl globalOnly="true" sticky="false" life="3000" />
						<p:focus />
						<a:queue name="q2" />
						<fieldset>
							<legend>#{app.combapa_legend2}</legend>
							<center>
								<table style="width: 950px;">
									<tr>
										<td style="width: 40%;"><h:panelGrid columns="2">

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:220px;">
													<ui:define name="label">#{app.combapa_combo}:</ui:define>
													<h:inputText value="#{ventaComboHome.comboVtaBin.nombre}"
														readonly="true" disabled="true" required="true"
														style="width:180px;">
														<a:support event="onblur" ajaxSingle="true"
															eventsQueue="q2" />
													</h:inputText><!-- rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }"  -->
													<a:commandButton
														onclick="#{rich:component('selComboBin')}.show();"
														ajaxSingle="true"
														action="#{comboAparatoHome.cargarCombosActivos()}"
														rendered="#{empty ventaComboHome.cotizacion}"
														reRender="cmbBin" styleClass="modifyBtn"
														value="#{app.ca_button_selprod}" width="auto">
													</a:commandButton>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
													<ui:define name="label">#{app.aparcli_earphone}:</ui:define>
													<h:selectBooleanCheckbox
														value="#{aparatoClienteHome.instance.retroAuricular}">
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q2" />
													</h:selectBooleanCheckbox>
												</s:decorate>
												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:170px;">
													<ui:define name="label">#{app.aparcli_earside}:</ui:define>
													<h:selectOneMenu
														value="#{aparatoClienteHome.instance.ladoAparatoBin}"
														required="true" id="_selLadoBin">
														<f:selectItem itemLabel="#{msn.side_left}" itemValue="IZQ" />
														<f:selectItem itemLabel="#{msn.side_right}"
															itemValue="DER" />
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q2"
															action="#{ventaComboHome.actualizarLadoApa()}"
															reRender="_selLadoNrml,_selLadoBin" />
													</h:selectOneMenu>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;">
													<ui:define name="label">#{app.combapa_tiene_gar}:</ui:define>
													<h:selectBooleanCheckbox id="boolTieneGarBin"
														value="#{ventaComboHome.tieneGarantiaBin}" disabled="true">
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1" reRender="_tmGar" />
													</h:selectBooleanCheckbox>
												</s:decorate>

												<s:decorate template="/layout/kEditSpace.xhtml"
													style="width:180px;" id="_tmGarBin">
													<ui:define name="label">#{app.combapa_time_gar}:</ui:define>
													<h:selectOneMenu
														value="#{ventaComboHome.comboVtaBin.periodoGarantia}"
														style="width:160px;"
														rendered="#{ventaComboHome.tieneGarantiaBin==true}">
														<f:selectItem itemLabel="#{app.combapa_gar_30d}"
															itemValue="30" />
														<f:selectItem itemLabel="#{app.combapa_gar_60d}"
															itemValue="60" />
														<f:selectItem itemLabel="#{app.combapa_gar_183d}"
															itemValue="183" />
														<f:selectItem itemLabel="#{app.combapa_gar_366d}"
															itemValue="366" />
														<a:support event="onchange" ajaxSingle="true"
															eventsQueue="q1" />
													</h:selectOneMenu>
												</s:decorate>


											</h:panelGrid></td>
									</tr>
									<tr> <td> <hr style="border:0.01em dashed #333; box-shadow: 0px 0px 10px #666;"></hr></td></tr>
									
									<tr>
										<td colspan="2"><br /> 
										<h3 class="cmbVta-lbl">
										<h:outputText rendered="#{not empty ventaComboHome.selCmbsList and ventaComboHome.cotizacion.estado=='PEN'}" value="combo venta:" style="margin-right:5px;" />
										
									<h:selectOneMenu
												value="#{ventaComboHome.selectedComboVtaBin}"
												rendered="#{not empty ventaComboHome.selCmbsListBin and ventaComboHome.cotizacion.estado=='PEN'}">
												<s:selectItems value="#{ventaComboHome.selCmbsListBin}"
													var="combo" label="#{combo.nombre}" itemValue="#{combo.id}"
													noSelectionLabel="Seleccione combo..."
													hideNoSelectionLabel="true" />
												<a:support event="onchange" ajaxSingle="true"
													eventsQueue="q1"
													reRender="boolTieneGarBin,_tmGarBin,_clPrecio,_tblItemsCmb, _dgCombos,  _totMag1"
													action="#{ventaComboHome.setComboVenderBin()}" update="growl" />
											</h:selectOneMenu> </h3> 
											<rich:dataGrid value="#{ventaComboHome.selCmbsListBin}"
												
												var="combo" columns="1" elements="9" width="600px"
												border="0" id="_dgCombosBin">

												<rich:panel id="_cmbDetBin"
													rendered="#{not (ventaComboHome.cotizacion.estado=='COT' or ventaComboHome.cotizacion.estado=='APL'  and combo.id==ventaComboHome.selectedComboVtaBin)}">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText rendered="#{combo.total > 0}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable var="res" value="#{combo.itemsCombo}"
														id="_tblItemsCmb" rows="10" align="center"
														rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}"
															id="_clPrecio">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.producto.prcNormal}"
																rendered="#{res.tipoPrecio=='NRM'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcMinimo}"
																rendered="#{res.tipoPrecio=='MIN'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcOferta}"
																rendered="#{res.tipoPrecio=='OFE'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														<!--<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>
														-->
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>
		
														<!--<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column> -->
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value="---"
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="codBin" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCodeBin')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
												<rich:panel id="_cmbDetBin2"
													rendered="#{ventaComboHome.cotizacion.estado=='COT' and combo.id==ventaComboHome.selectedComboVtaBin}"
													headerClass="dr-pnl-h-custom">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText rendered="#{combo.total > 0}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable var="res" value="#{combo.itemsCombo}"
														id="_tblItemsCmb2" rows="10" align="center"
														rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}"
															id="_clPrecio2">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.producto.prcNormal}"
																rendered="#{res.tipoPrecio=='NRM'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcMinimo}"
																rendered="#{res.tipoPrecio=='MIN'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcOferta}"
																rendered="#{res.tipoPrecio=='OFE'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														
														<!-- <rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>-->
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="-"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>
													
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														<!-- <rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														 -->
														
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="codBin" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCodeBin')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
												<rich:panel id="_cmbDetBin3"
													rendered="#{ventaComboHome.cotizacion.estado=='APL' and combo.id==ventaComboHome.selectedComboVtaBin}"
													headerClass="comboVendido">
													<f:facet name="header">
														<h:panelGroup>
															<h:outputText value="#{combo.nombre}" />
															<h:outputText rendered="#{combo.total > 0}"
																value="#{combo.total}" style="float:right; clear:both;">
																<f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" />
															</h:outputText>
														</h:panelGroup>
													</f:facet>
													<rich:dataTable var="res" value="#{combo.itemsCombo}"
														id="_tblItemsCmb3" rows="10" align="center"
														rowClasses="tblEven,tblOdd"
														onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
														onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
														headerClass="tablaHeader" footerClass="tableScroll">
														<f:facet name="header">#{app.combapa_listitems}</f:facet>

														<rich:column>
															<f:facet name="header">#{app.productomast_category}</f:facet>
															<h:outputText value="#{res.categoria.nombre}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.productomast_name}</f:facet>
															<h:outputText value="#{res.producto.nombre}"
																rendered="#{res.producto!=null}" />
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.parvta_description}</f:facet>
															<h:outputText value="#{res.descripcion}" />
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}"
															id="_clPrecio2">
															<f:facet name="header">#{app.vtaprs_monto}</f:facet>
															<h:outputText value="#{res.producto.prcNormal}"
																rendered="#{res.tipoPrecio=='NRM'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcMinimo}"
																rendered="#{res.tipoPrecio=='MIN'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
															<h:outputText value="#{res.producto.prcOferta}"
																rendered="#{res.tipoPrecio=='OFE'}">
																<f:convertNumber currencySymbol="$" type="currency"
																	locale="en-US" groupingUsed="true" integerOnly="true"
																	maxFractionDigits="2" />
															</h:outputText>
														</rich:column>
														<rich:column
															rendered="#{loginUser.getUser().isAccionEspecial()==true}">
															<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
															<h:selectOneMenu value="#{res.tipoPrecio}"
																required="true" disabled="#{res.producto==null}">
																<f:selectItem itemLabel="#{app.producto_prc1}"
																	itemValue="NRM" />
																<f:selectItem itemLabel="#{app.producto_prc2}"
																	itemValue="MIN" />
																<f:selectItem itemLabel="#{app.producto_prc3}"
																	itemValue="OFE" />
																<a:support event="onchange" ajaxSingle="true"
																	eventsQueue="q1"
																	reRender="_clPrecio,_totMag1,_tblItemsCmb"
																	action="#{ventaComboHome.recalcularTotalVenta()}" />
															</h:selectOneMenu>
														</rich:column>
														<rich:column>
															<f:facet name="header">#{app.combapa_apaprpal}</f:facet>
															<center>
																<h:selectBooleanCheckbox value="#{res.principal}"
																	disabled="true">
																</h:selectBooleanCheckbox>
															</center>
														</rich:column>
														
														<!-- <rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{res.codProducto.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>-->
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codlot}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numLote}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumLote==true}" />
															<h:outputText value="-"
																rendered="#{res.producto.categoria.tieneNumLote==false}" />
														</rich:column>
													
														
														<rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{ventaComboHome.codCombo2.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														<!-- <rich:column style="width:140px;">
															<f:facet name="header">#{app.producto_codser}</f:facet>
															<h:outputText value="#{res.codProducto.numSerie}"
																size="20"
																rendered="#{res.producto.categoria.tieneNumSerie==true}" />
															<h:outputText value=""
																rendered="#{res.producto.categoria.tieneNumSerie==false}" />
														</rich:column>
														 -->
														
														<rich:column>
															<f:facet name="header">#{msn.col_actions}</f:facet>
															<a:commandLink title="#{msn.ca_button_selpzap}"
																reRender="itm" rendered="#{res.producto==null}"
																eventsQueue="q1"
																action="#{ventaComboHome.selItemFromCat(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selItem')}.show();">
																<h:graphicImage value="/kubeImg/table_detail2.png" />
															</a:commandLink>
															<a:commandLink title="#{msn.ca_button_selcodp}"
																reRender="codBin" eventsQueue="q1"
																rendered="#{res.producto!=null and (res.producto.categoria.tieneNumSerie==true or res.producto.categoria.tieneNumLote==true)}"
																action="#{ventaComboHome.selCodForItem(res)}"
																ajaxSingle="true"
																onclick="#{rich:component('selCodeBin')}.show();">
																<h:graphicImage value="/kubeImg/table_detail3.png" />
															</a:commandLink>
														</rich:column>
														<f:facet name="footer">
														</f:facet>
													</rich:dataTable>
												</rich:panel>
											</rich:dataGrid></td>
									</tr>
								</table>
								<s:decorate template="/layout/kActions.xhtml">
									<a:commandButton action="#{ventaComboHome.calcularPrecios()}"
										reRender="formapacli, formapacli2, _totMag1"
										styleClass="saveBtn" value="#{app.vtaapa_calc_tot}" />

									<a:commandButton action="#{ventaComboHome.porCobrar()}"
										reRender="formapacli,formapacli2,_actionBtns"
										rendered="#{not ventaComboHome.managed and not empty ventaComboHome.cotizacion and empty ventaComboHome.cotizacion.cuentaCobrar and ventaComboHome.cotizacion.estado!='APL'}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="Poner a credito" />
									<s:decorate
										rendered="#{not empty ventaComboHome.cotizacion.cuentaCobrar}"
										style="display:inline-block; margin:0px 10px 0px 0px; vertical-align:middle;">
										<h:graphicImage value="/kubeImg/disabled.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente gt (0.9 * ventaComboHome.cotizacion.cuentaCobrar.monto)}" />
										<h:graphicImage value="/kubeImg/alert.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente ge 0.01  and ventaComboHome.cotizacion.cuentaCobrar.remanente le (0.9 * ventaComboHome.cotizacion.cuentaCobrar.monto)}" />
										<h:graphicImage value="/kubeImg/enabled.png"
											rendered="#{ventaComboHome.cotizacion.cuentaCobrar.remanente lt 0.01}" />
										<s:decorate style="vertical-align:middle; font-weight:bold;">
											<h:outputText value="Remanente: " />
											<h:outputText
												value="#{ventaComboHome.cotizacion.cuentaCobrar.remanente}">
												<f:convertNumber currencySymbol="$" groupingUsed="true"
													integerOnly="true" type="currency" locale="en-US"
													maxFractionDigits="2" minFractionDigits="2" />
											</h:outputText>
										</s:decorate>
									</s:decorate>
									<s:button view="/vtas/vtaaparato/master.xhtml"
										rendered="#{empty ventaComboHome.cotizacion}"
										propagation="begin" styleClass="newBtn"
										value="#{msn.button_new}">
										<f:param name="id" value="" />
									</s:button>
									<a:commandButton action="#{ventaComboHome.save()}"
										reRender="formapacli2,formapacli"
										disabled="#{ventaComboHome.cotizacion.cuentaCobrar.remanente gt 0.01}"
										rendered="#{not ventaComboHome.managed and not empty ventaComboHome.cotizacion and ventaComboHome.cotizacion.estado!='COT' and ventaComboHome.cotizacion.estado!='APL'}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_venta}" />
										
									<a:commandButton action="#{ventaComboHome.finalizarVentaPorCredito()}"
										reRender="formapacli2,formapacli"
										rendered="#{not empty ventaComboHome.cotizacion and ventaComboHome.cotizacion.cuentaCobrar.remanente==0}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_venta}" />

									<a:commandButton propagation="join"
										oncomplete="showReport('detalleCotizBin', '#{conversation.id}'); "
										rendered="#{not empty ventaComboHome.cotizacion}"
										styleClass="pdfBtn" ignoreDupResponses="true"
										value="#{app.vt_rep_cotiz}" />

									<a:commandButton action="#{ventaComboHome.cotizarVenta()}"
										reRender="formapacli,formapacli2"
										rendered="#{not ventaComboHome.managed and empty ventaComboHome.cotizacion}"
										styleClass="saveBtn" ignoreDupResponses="false"
										value="#{app.vt_vtaprs_cotiz}" />

									<a:commandButton
										rendered="#{ventaComboHome.cotizacion.estado == 'PEN' and loginUser.getUser().isAccionEspecial()==true and not ventaComboHome.managed and not empty ventaComboHome.cotizacion}"
										styleClass="saveBtn" ignoreDupResponses="true"
										value="Guardar cotizacion">
										<a:support event="onclick" ajaxSingle="true" eventsQueue="q1"
											reRender="formapacli,formapacli2"
											action="#{ventaComboHome.actualizarCotizacion()}"
											update="growl" />
									</a:commandButton>

									<a:commandButton
										action="#{ventaComboHome.cancelarCotizacion()}"
										reRender="formapacli2" rendered="#{false}"
										styleClass="deleteBtn" ignoreDupResponses="true"
										value="#{app.vt_vtaprs_cotiz_can}" />
								</s:decorate>
							</center>
						</fieldset>
					</h:form>
				</rich:tab>
				<rich:tab name="tab3" label="Productos adicionales" eventsQueue="q2">
					<h:form id="formprdadic">
						<center>
							<p:growl globalOnly="true" sticky="false" life="3000" />
							<p:focus />
							<a:queue name="q7" />
							<s:decorate template="/layout/kActions.xhtml">
								<a:commandButton onclick="#{rich:component('selItem2')}.show();"
									ajaxSingle="true"
									action="#{productoHome.cargarListaProductos(loginUser.user.sucursal)}"
									reRender="m1" styleClass="addBtn"
									value="#{msn.button_add_product}"
									rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }">
								</a:commandButton>
							</s:decorate>

							<rich:spacer height="20" />

							<rich:dataTable var="res" value="#{ventaItemHome.itemsAgregados}"
								id="_table" rendered="#{not empty ventaItemHome.itemsAgregados}"
								align="center" rowClasses="tblEven,tblOdd"
								onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
								onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
								headerClass="tablaHeader" footerClass="tableScroll">
								<f:facet name="header">#{app.vtaitm_listitm}</f:facet>
								<rich:column>
									<f:facet name="header">#{app.compra_itemlist_col1}</f:facet>
									<h:outputText value="#{res.inventario.producto.referencia}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">#{app.compra_itemlist_col2}</f:facet>
									<h:outputText value="#{res.inventario.producto.nombre}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">#{app.productolist_col7}</f:facet>
									<h:outputText value="#{res.inventario.cantidadActual}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">#{app.transferencia_itemlist_col3}</f:facet>
									<h:inputText value="#{res.cantidad}" size="8"
										onkeypress="return restrictNumDigits(event, this, 8);">
										<a:support event="onblur"
											action="#{ventaComboHome.actualizarSubtotalPrd()}"
											ajaxSingle="true" eventsQueue="q7" reRender="_table,_totMag1" />
									</h:inputText>
								</rich:column>
								<rich:column id="_clPrecio">
									<f:facet name="header">#{app.vtaprs_monto}</f:facet>
									<h:outputText value="#{res.inventario.producto.prcNormal}"
										rendered="#{res.tipoPrecio=='NRM'}">
										<f:convertNumber currencySymbol="$" type="currency"
											locale="en-US" groupingUsed="true" integerOnly="true"
											maxFractionDigits="2" />
									</h:outputText>
									<h:outputText value="#{res.inventario.producto.prcMinimo}"
										rendered="#{res.tipoPrecio=='MIN'}">
										<f:convertNumber currencySymbol="$" type="currency"
											locale="en-US" groupingUsed="true" integerOnly="true"
											maxFractionDigits="2" />
									</h:outputText>
									<h:outputText value="#{res.inventario.producto.prcOferta}"
										rendered="#{res.tipoPrecio=='OFE'}">
										<f:convertNumber currencySymbol="$" type="currency"
											locale="en-US" groupingUsed="true" integerOnly="true"
											maxFractionDigits="2" />
									</h:outputText>
								</rich:column>
								<rich:column
									rendered="#{loginUser.getUser().isAccionEspecial()==true}">
									<f:facet name="header">#{app.vtaitm_tipopre}</f:facet>
									<h:selectOneMenu value="#{res.tipoPrecio}" required="true"
										disabled="#{res.inventario.producto==null}">
										<f:selectItem itemLabel="#{app.producto_prc1}" itemValue="NRM" />
										<f:selectItem itemLabel="#{app.producto_prc2}" itemValue="MIN" />
										<f:selectItem itemLabel="#{app.producto_prc3}" itemValue="OFE" />
										<a:support event="onchange" ajaxSingle="true" eventsQueue="q7"
											action="#{ventaComboHome.actualizarSubtotalPrd()}"
											reRender="_clPrecio,_clTotal,_totMag1" />
									</h:selectOneMenu>
								</rich:column>
								<rich:column
									rendered="#{not(ventaComboHome.cotizacion.estado=='COT')}">
									<f:facet name="header">#{msn.col_actions}</f:facet>
									<a:commandLink title="#{msn.button_addcod}" reRender="m2"
										eventsQueue="q7"
										rendered="#{res.inventario.producto.categoria.tieneNumSerie==true or 
										res.inventario.producto.categoria.tieneNumLote==true}"
										action="#{ventaItemHome.cargarListaCodigos(res)}"
										ajaxSingle="true"
										onclick="#{rich:component('lstCodigos')}.show();">
										<h:graphicImage value="/kubeImg/table_detail2.png" />
									</a:commandLink>
									<rich:spacer width="10"
										rendered="#{res.inventario.producto.categoria.tieneNumSerie==true or 
										res.inventario.producto.categoria.tieneNumLote==true}" />
									<a:commandLink
										rendered="#{not(ventaComboHome.cotizacion.estado=='COT') }"
										reRender="formprdadic,_totMag1" eventsQueue="q7"
										action="#{ventaComboHome.removerItemPrd(res)}"
										ajaxSingle="true">
										<h:graphicImage value="/kubeImg/table_delete16.png" />
									</a:commandLink>
								</rich:column>
								<f:facet name="footer">
									<h:panelGroup>
										<h:outputText value="Subtotal: " />
										<h:outputText value="#{ventaItemHome.subTotal}" size="8"
											id="_clTotal">
											<f:convertNumber currencySymbol="$" groupingUsed="true"
												integerOnly="true" type="currency" locale="en-US"
												maxFractionDigits="2" minFractionDigits="2" />
										</h:outputText>
									</h:panelGroup>
								</f:facet>
							</rich:dataTable>

							<s:decorate>
								<a:commandButton
									rendered="#{ventaComboHome.cotizacion.estado == 'PEN' and loginUser.getUser().isAccionEspecial()==true and not ventaComboHome.managed and not empty ventaComboHome.cotizacion}"
									styleClass="saveBtn" ignoreDupResponses="true"
									value="Autorizar descuento">
									<a:support event="onclick" ajaxSingle="true" eventsQueue="q7"
										reRender="formprdadic"
										action="#{ventaComboHome.actualizarCotizacion()}"
										update="growl" />
								</a:commandButton>
								<a:commandButton propagation="join"
									oncomplete="showReport('detallePrdAdic', '#{conversation.id}'); "
									rendered="#{not empty ventaComboHome.cotizacion}"
									styleClass="pdfBtn" ignoreDupResponses="true"
									value="#{app.vt_rep_cotiz}" />
							</s:decorate>
						</center>
					</h:form>
				</rich:tab>


				<rich:tab name="tab4" label="Servicios" eventsQueue="q2">
					<h:form id="formsrvadic">
						<center>
							<p:growl globalOnly="true" sticky="false" life="3000" />
							<p:focus />
							<a:queue name="q8" />
							<s:decorate template="/layout/kActions.xhtml">
								<a:commandButton onclick="#{rich:component('selSrv2')}.show();"
									ajaxSingle="true" action="#{serviceDAO.loadServiciosList()}"
									reRender="m79" styleClass="addBtn" value="Agregar servicio" rendered="#{not(ventaComboHome.cotizacion.estado=='PEN') and not(ventaComboHome.cotizacion.estado=='COT') }">
								</a:commandButton>
							</s:decorate>

							<rich:spacer height="20" />

							<rich:dataTable var="res"
								value="#{ventaItemHome.serviciosAgregados}" id="_tableSrv"
								rendered="#{not empty ventaItemHome.serviciosAgregados}"
								align="center" rowClasses="tblEven,tblOdd"
								onRowMouseOver="this.style.backgroundColor='#A3CAF1'"
								onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowClassName}'"
								headerClass="tablaHeader" footerClass="tableScroll">
								<rich:column>
									<f:facet name="header">Codigo</f:facet>
									<h:outputText value="#{res.codigo}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">Nombre</f:facet>
									<h:outputText value="#{res.name}" />
								</rich:column>

								<rich:column>
									<f:facet name="header">#{app.servmast_tiposerv}</f:facet>
									<h:outputText value="#{app.servmast_tipos_tll}"
										rendered="#{res.tipoServicio=='TLL'}" />
									<h:outputText value="#{app.servmast_tipos_med}"
										rendered="#{res.tipoServicio=='MED'}" />
									<h:outputText value="#{app.servmast_tipos_cmb}"
										rendered="#{res.tipoServicio=='CMB'}" />
									<h:outputText value="#{app.servmast_tipos_exa}"
										rendered="#{res.tipoServicio=='EXA'}" />
								</rich:column>
								<rich:column>
									<f:facet name="header">#{app.transferencia_itemlist_col3}</f:facet>
									<h:inputText value="#{res.cantidad}" size="8"
										onkeypress="return restrictNumDigits(event, this, 1);">
										<a:support event="onblur"
											action="#{ventaComboHome.actualizarSubtotalSrv()}"
											ajaxSingle="true" eventsQueue="q8"
											reRender="_table,_totMag1,_clTotalSrv" />
									</h:inputText>
								</rich:column>
								<rich:column id="_clPrecio">
									<f:facet name="header">Costo</f:facet>
									<h:outputText value="#{res.costo}">
										<f:convertNumber currencySymbol="$" type="currency"
											locale="en-US" groupingUsed="true" integerOnly="true"
											maxFractionDigits="2" minFractionDigits="2" />
									</h:outputText>
								</rich:column>

								<rich:column>
									<f:facet name="header">#{msn.col_actions}</f:facet>

									<a:commandLink rendered="#{not(ventaComboHome.cotizacion.estado=='COT') }" reRender="formsrvadic,_totMag1" eventsQueue="q8"
										action="#{ventaComboHome.removerServicio(res)}"
										ajaxSingle="true">
										<h:graphicImage value="/kubeImg/table_delete16.png" />
									</a:commandLink>
								</rich:column>
								<f:facet name="footer">
										<h:panelGroup>
									<h:outputText value="Subtotal: " />
									<h:outputText value="#{ventaItemHome.subTotalSrv}"
										size="8" id="_clTotalSrv"> <f:convertNumber currencySymbol="$" groupingUsed="true"
																	integerOnly="true" type="currency" locale="en-US"
																	maxFractionDigits="2" minFractionDigits="2" /> 
										</h:outputText>
										</h:panelGroup>
								</f:facet>
							</rich:dataTable>
							
							<s:decorate>
								<a:commandButton propagation="join"
									oncomplete="showReport('detalleSvcAdic', '#{conversation.id}'); "
									rendered="#{not empty ventaComboHome.cotizacion}"
									styleClass="pdfBtn" ignoreDupResponses="true"
									value="#{app.vt_rep_cotiz}" />
							</s:decorate>	
						</center>
					</h:form>
				</rich:tab>

			</rich:tabPanel>


			<center>
				<table>
					<tr>
						<td>
							<s:button view="/rep/cot/cotizacionCliente.xhtml" rendered="#{ventaComboHome.cotizacion.estado=='APL'}"
								propagation="begin" styleClass="listBtn"
								value="Volver al reporte">
							</s:button>
							<s:button view="/vtas/vtaaparato/list.xhtml" rendered="#{ventaComboHome.cotizacion.estado!='APL'}"
								propagation="begin" styleClass="listBtn"
								value="#{msn.button_list}">
							</s:button>
						</td>
						<td><s:button view="/vtas/vtaaparato/master.xhtml"
								rendered="#{empty ventaComboHome.cotizacion}"
								propagation="begin" styleClass="newBtn"
								value="#{msn.button_new}">
								<f:param name="id" value="" />
							</s:button></td>
					</tr>
				</table>

			</center>

			<rich:modalPanel id="selClient" width="800" moveable="true"
				autosized="true" top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selClient');">
				<f:facet name="header">#{app.usuariolist_modal}</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selClient')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="cli">
					<ui:include src="selClient.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selCombo" moveable="true" autosized="true"
				top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selCombo');">
				<f:facet name="header">#{app.combapa_selcmb_head}</f:facet>
				<f:facet name="controls">
					
				</f:facet>
				<s:div id="cmb">
					<ui:include src="selCombo.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selComboBin" moveable="true" autosized="true"
				top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selComboBin');">
				<f:facet name="header">#{app.combapa_selcmb_head}</f:facet>
				<f:facet name="controls">
			
				</f:facet>
				<s:div id="cmbBin">
					<ui:include src="selComboBin.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selItem" width="800" moveable="true"
				autosized="true" top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selItem');">
				<f:facet name="header">#{app.general_lov}</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selItem')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="itm">
					<ui:include src="selItem.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="lstCodigos" width="680" moveable="true"
				 autosized="true" top="50px"
				onbeforeshow="activeModal.setActiveModalPanel('confirmation');">
				<f:facet name="header">#{app.compralist_add_products_modal}</f:facet>

				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('lstCodigos')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="m2">
					<ui:include src="codsProducts.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selCode" width="400" moveable="true"
				autosized="true" top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selCode');">
				<f:facet name="header">#{app.general_lov}</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selCode')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="cod">
					<ui:include src="selCode.xhtml" />
				</s:div>
			</rich:modalPanel>
			
			<rich:modalPanel id="selCodeBin" width="400" moveable="true"
				autosized="true" top="40" 
				onbeforeshow="activeModal.setActiveModalPanel('selCodeBin');">
				<f:facet name="header">#{app.general_lov}</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selCodeBin')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="codBin">
					<ui:include src="selCodeBin.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selItem2" width="800" moveable="true" 
				autosized="true" top="50px"
				onbeforeshow="activeModal.setActiveModalPanel('selItem2');">
				<f:facet name="header">#{app.compralist_add_products_modal}</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selItem2')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="m1">
					<ui:include src="addProducts.xhtml" />
				</s:div>
			</rich:modalPanel>

			<rich:modalPanel id="selSrv2" width="800" moveable="true" 
				autosized="true" top="50px"
				onbeforeshow="activeModal.setActiveModalPanel('selSrv2');">
				<f:facet name="header">Servicios para venta</f:facet>
				<f:facet name="controls">
					<h:panelGroup>
						<h:graphicImage value="/kubeImg/close.png" styleClass="closeBtn"
							onclick="#{rich:component('selSrv2')}.hide();" />
					</h:panelGroup>
				</f:facet>
				<s:div id="m79">
					<ui:include src="addServices.xhtml" />
				</s:div>
			</rich:modalPanel>

		</rich:panel>
		<a:status id="stateStatus" startText="#{app.general_espere}"
			startStyle="background-color: #c0c7d1;
   			border-style: groove;
			border-width:15px;
			border-color: #818fa3 #5a687b #465160 #323a44;
		   font-weight:bold;
		   font-size: 12px;
		   text-align: center;
		   position:absolute; 
		   right: 50%; 
		   top: 1px; 
		   width: auto;" />
	</ui:define>
</ui:composition>