<p:document xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://jboss.com/products/seam/pdf"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	title="#{app.report_pdf_movements_file_title}" creator="Soluciones Aplicativas"
	pageSize="LETTER" type="pdf" orientation="landscape" margins="20 20 30 30">
	<p:font size="18" style="bold">
		<p:paragraph alignment="center">#{app.report_rwrk_tll}</p:paragraph>
	</p:font>
	<p:html><br /></p:html>
	<p:table columns="4" widthPercentage="70" headerRows="0" widths="0.6 1 0.6 1" >
		<p:cell horizontalAlignment="center" verticalAlignment="middle"
			backgroundColor="#E4E4E4" fixedHeight="16">
			<p:paragraph alignment="center">Fecha inicial: </p:paragraph>
		</p:cell>
		<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" fixedHeight="16">
			<p:paragraph><p:text value="#{repTaller.fechaInicio}">
				<s:convertDateTime pattern="dd/MM/yyyy" />
			</p:text></p:paragraph>
		</p:cell>
		<p:cell horizontalAlignment="center" verticalAlignment="middle"
			backgroundColor="#E4E4E4"  fixedHeight="16">
			<p:paragraph alignment="center">Fecha final: </p:paragraph>
		</p:cell>
		<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" fixedHeight="16">
			<p:paragraph><p:text value="#{repTaller.fechaFin}">
				<s:convertDateTime pattern="dd/MM/yyyy" />
			</p:text></p:paragraph>
		</p:cell>
		
		<p:cell horizontalAlignment="center" verticalAlignment="middle"
			backgroundColor="#E4E4E4" fixedHeight="16">
			<p:paragraph alignment="center">Sucursal: </p:paragraph>
		</p:cell>
		<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" fixedHeight="16">
			<p:paragraph><p:text value="#{repTaller.sucursal.nombre}">
			</p:text></p:paragraph>
		</p:cell>
		<p:cell horizontalAlignment="center" verticalAlignment="middle"
			backgroundColor="#E4E4E4" fixedHeight="16">
			<p:paragraph alignment="center">Tipo de trabajo: </p:paragraph>
		</p:cell>
		<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" fixedHeight="16">
			<p:paragraph>
				<p:text value="#{repTaller.procesoTll.nombre}" />
			</p:paragraph>
		</p:cell>
	</p:table>
	<p:html><br /></p:html>
	
	<p:font size="14">
	<p:table columns="1" widthPercentage="40" headerRows="0" widths="1" >
		<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" fixedHeight="26">
			<p:paragraph><p:font style="bold">
				<p:text value="#{repTaller.reparaciones.size()}" />
			</p:font>
				<p:text value=" trabajos de taller realizados" />
			</p:paragraph>
		</p:cell>
		
	</p:table>
	</p:font>
	<p:html><br /></p:html>
	<p:font size="9">
		<p:table columns="9" widthPercentage="100" headerRows="1"  widths="0.7 1 2 1 1 1 0.7 1 1" >
			<p:font color="black" style="bold" size="10">
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">ID Trabajo</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.vtaprs_fecha}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.vtaprs_cliente}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.usuariomast_branch}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="right">#{app.etarepcli_proceso}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.etarepcli_etapa}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">Num. días</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.etarepcli_aparato}</p:paragraph>
			</p:cell>
			<p:cell horizontalAlignment="center" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4">
				<p:paragraph alignment="center">#{app.parvta_tp_monto}</p:paragraph>
			</p:cell>
			</p:font>

			
		<ui:repeat var="rep" value="#{repTaller.reparaciones}">
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>#{rep.proceso.prcCode}#{rep.id}</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph><p:text value="#{rep.fechaIngreso}">
					<s:convertDateTime pattern="dd/MM/yyyy" />
				</p:text></p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>#{rep.cliente.nombres} #{rep.cliente.apellidos}</p:paragraph>
			</p:cell>			
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>#{rep.sucursal.nombre}</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>#{rep.proceso.nombre}</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>
					<p:text value="#{rep.currEtapa.etapaRep.nombre}" rendered="#{rep.currEtapa!=null and rep.aprobada==true and rep.estado=='PEN' and rep.currEtapa.etapaRep.codEta!='EVA'}" />
					<p:text value="Evaluación" rendered="#{rep.currEtapa.etapaRep.codEta=='EVA' and rep.estado=='PEN'}" />
					<p:text value="Reparación finalizada" rendered="#{rep.estado=='FIN'}" />
					<p:text value="Entregado al cliente" rendered="#{rep.estado=='DLV'}" />
					<p:text value="Cancelado por el cliente" rendered="#{rep.estado=='REC'}" />
					<p:text value="Pendiente de aprobar" rendered="#{rep.estado!='REC' and rep.currEtapa.etapaRep.codEta!='EVA' and rep.aprobada==false}" />
				</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="right" paddingRight="4" minimumHeight="16">
				<p:paragraph>#{rep.currEtapa.numDias}</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="center" paddingLeft="3" minimumHeight="16">
				<p:paragraph>#{rep.aparatoRep.nombre}</p:paragraph>
			</p:cell>
			<p:cell verticalAlignment="middle" horizontalAlignment="right" paddingRight="4" minimumHeight="16">
				<p:paragraph>
				<p:text value="#{rep.costo}" rendered="#{rep.costo!=null}">
					<f:convertNumber currencySymbol="$" type="currency" locale="en-US"
								groupingUsed="true" integerOnly="true" maxFractionDigits="2" />
				</p:text>
				<p:text value="-" rendered="#{rep.costo==null}" />
				</p:paragraph>
			</p:cell>
		</ui:repeat>
			<p:font color="black" style="bold" size="10">
			<p:cell horizontalAlignment="right" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingBottom="4" paddingRight="4" colspan="7">
				<p:paragraph alignment="center">TOTAL</p:paragraph>
			</p:cell>
			</p:font>
			<p:cell horizontalAlignment="right" verticalAlignment="middle"
				backgroundColor="#E4E4E4" paddingRight="4">
				<p:paragraph><p:text value="#{repTaller.totDec1}">
					<f:convertNumber currencySymbol="$" type="currency" locale="en-US"
								groupingUsed="true" integerOnly="true" maxFractionDigits="2" />
				</p:text></p:paragraph>
			</p:cell>
	</p:table>
	
	</p:font>
	<f:facet name="header">
		<p:font size="9">
			<p:header borderWidthTop="0" borderWidthBottom="1" alignment="center">
                Sistema de Inventario, Clínica, Contabilidad y Ventas - AUDIOMED
        	</p:header>
			<p:footer borderWidthTop="1" borderWidthBottom="0" alignment="center">
                Pag. <p:pageNumber />
			</p:footer>
		</p:font>
	</f:facet>
</p:document>